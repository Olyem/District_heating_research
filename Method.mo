within ;
package Method



model model_1



 // Supply_heating

Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=10,
dp_nominal=0,
Q_flow_nominal=1e6,
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant,
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue())
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler(
  y=boiler_supply_gas_boiler.sta_b.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler(
  k=273.15+0)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 5e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler(
  redeclare package Medium = Buildings.Media.Water)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings

Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2(
  y=hex_SST_Building_2.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1(
  y=hex_SST_Building_1.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3(
  y=hex_H_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3(
  y=hex_W_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes

Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

equation


 //gas_boiler

connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_2

connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{10,4}},
                                    color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,-10}},
                                    color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2

connect( boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a)
    annotation (Line(points={{90,50}}));
connect( pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a)
    annotation (Line(points={{-10,0}}));
connect( temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a)
    annotation (Line(points={{90,50}}));
connect( pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1)
    annotation (Line(points={{10,16}}));

 //Building_1

connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{10,4}},
                                    color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,-10}},
                                    color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1

connect( pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_1_a.port_a)
    annotation (Line(points={{-10,100}}));
connect( pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a)
    annotation (Line(points={{-10,0}}));
connect( pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_1_b.port_a)
    annotation (Line(points={{-10,100}}));
connect( pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1)
    annotation (Line(points={{10,16}}));

 //Building_3

connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{10,204}},
                                      color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,190}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{10,204}},
                                      color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,190}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect( hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1);
connect( valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a);

 // Building_1, Building_3

connect( pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a)
    annotation (Line(points={{140,200}}));
connect( pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a)
    annotation (Line(points={{-10,0}}));
connect( pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a)
    annotation (Line(points={{140,200}}));
connect( pipe_Building_1Building_3_b.port_b, hex_W_SST_Building_3.port_b1)
    annotation (Line(points={{10,216}}));


end model_1;

model model_2



 // Supply_heating

Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 5e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump(
  redeclare package Medium = Buildings.Media.Water)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings

Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1(
  y=hex_SST_Building_1.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2(
  y=hex_SST_Building_2.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3(
  y=hex_H_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3(
  y=hex_W_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes

Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

equation


 //heat_pump

connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1

connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{10,4}},
                                    color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,-10}},
                                    color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1

connect( HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a)
    annotation (Line(points={{-10,100}}));
connect( pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a)
    annotation (Line(points={{-10,0}}));
connect( temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a)
    annotation (Line(points={{-10,100}}));
connect( pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1)
    annotation (Line(points={{10,16}}));

 //Building_2

connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{10,204}},
                                      color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,190}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2

connect( pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a)
    annotation (Line(points={{90,150}}));
connect( pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a)
    annotation (Line(points={{-10,0}}));
connect( pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a)
    annotation (Line(points={{90,150}}));
connect( pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1)
    annotation (Line(points={{10,216}}));

 //Building_3

connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{210,104}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,90}}, color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{210,104}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,90}}, color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect( hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1);
connect( valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a);

 // Building_2, Building_3

connect( pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a)
    annotation (Line(points={{240,150}}));
connect( pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a)
    annotation (Line(points={{-10,0}}));
connect( pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a)
    annotation (Line(points={{240,150}}));
connect( pipe_Building_2Building_3_b.port_b, hex_W_SST_Building_3.port_b1)
    annotation (Line(points={{210,116}}));


end model_2;

model model_3



 // Supply_heating

Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=10,
dp_nominal=0,
Q_flow_nominal=1e6,
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant,
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue())
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler(
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler(
  k=273.15+0)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler(
  redeclare package Medium = Buildings.Media.Water)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings

Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3(
  y=hex_H_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3(
  y=hex_W_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1(
  y=hex_SST_Building_1.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2(
  y=hex_SST_Building_2.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes

Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

equation


 //heat_pump_gas_boiler

connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_3

connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{10,4}},
                                    color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,-10}},
                                    color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{10,4}},
                                    color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,-10}},
                                    color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect( hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1);
connect( valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a);

 // heat_pump_gas_boiler, Building_3

connect( boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_a)
    annotation (Line(points={{140,100}}));
connect( pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a)
    annotation (Line(points={{-10,0}}));
connect( temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_3_b.port_a)
    annotation (Line(points={{140,100}}));
connect( pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_W_SST_Building_3.port_b1)
    annotation (Line(points={{10,16}}));

 //Building_1

connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{10,204}},
                                      color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,190}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2

connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{10,204}},
                                      color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,190}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2

connect( valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a)
    annotation (Line(points={{90,150}}));
connect( pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a)
    annotation (Line(points={{-10,0}}));
connect( hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a)
    annotation (Line(points={{90,150}}));
connect( pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1)
    annotation (Line(points={{10,216}}));

 // Building_2, Building_3

connect( pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a)
    annotation (Line(points={{240,150}}));
connect( pipe_Building_2Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b)
    annotation (Line(points={{160,100}}));
connect( pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a)
    annotation (Line(points={{240,150}}));
connect( pipe_Building_2Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b)
    annotation (Line(points={{160,100}}));


end model_3;

model model_4



 // Supply_heating

Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump(
  redeclare package Medium = Buildings.Media.Water)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings

Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1(
  y=hex_SST_Building_1.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2(
  y=hex_SST_Building_2.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3(
  y=hex_H_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3(
  y=hex_W_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes

Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

equation


 //geo_heat_pump

connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1

connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1

connect( HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a)
    annotation (Line(points={{0.0, 50.0}}));
connect( pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a)
    annotation (Line(points={{0.0, 150.0}}));
connect( temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a)
    annotation (Line(points={{0.0, 50.0}}));
connect( pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1)
    annotation (Line(points={{0.0, 150.0}}));

 //Building_2

connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2

connect( pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_2_a.port_a)
    annotation (Line(points={{50.0, 25.0}}));
connect( pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a)
    annotation (Line(points={{150.0, 75.0}}));
connect( pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_2_b.port_a)
    annotation (Line(points={{50.0, 25.0}}));
connect( pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1)
    annotation (Line(points={{150.0, 75.0}}));

 //Building_3

connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect( hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1);
connect( valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a);

 // geo_heat_pump, Building_3

connect( pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a)
    annotation (Line(points={{75.0, 50.0}}));
connect( pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a)
    annotation (Line(points={{225.0, 150.0}}));
connect( pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a)
    annotation (Line(points={{75.0, 50.0}}));
connect( pipe_geo_heat_pumpBuilding_3_b.port_b, hex_W_SST_Building_3.port_b1)
    annotation (Line(points={{225.0, 150.0}}));


end model_4;

model model_5



 // Supply_heating

Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=10,
dp_nominal=0,
Q_flow_nominal=1e6,
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant,
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue())
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo(
  redeclare package Medium = Buildings.Media.Water)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo(
  y=boiler_supply_gas_boiler_geo.sta_b.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo(
  k=273.15+0)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings

Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1(
  y=hex_SST_Building_1.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3(
  y=hex_H_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3(
  k=273.15+45)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3(
  y=hex_W_SST_Building_3.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
T = 273.15+40,
p = 2e5,
nPorts=1)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2(
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2(
  k=0.0001,
yMax=1,
yMin=0.001)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2(
  y=hex_SST_Building_2.sta_b2.T)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2(
  k=273.15+60)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2(
  redeclare package Medium = Buildings.Media.Water,
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes

Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b(
  redeclare package Medium = Buildings.Media.Water,
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141)
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

equation


 //gas_boiler_geo

connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1

connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1

connect( boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a)
    annotation (Line(points={{0.0, 50.0}}));
connect( pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a)
    annotation (Line(points={{0.0, 150.0}}));
connect( temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a)
    annotation (Line(points={{0.0, 50.0}}));
connect( pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1)
    annotation (Line(points={{0.0, 150.0}}));

 //Building_3

connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect( hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1);
connect( valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a);

 // Building_1, Building_3

connect( pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a)
    annotation (Line(points={{75.0, 200.0}}));
connect( pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a)
    annotation (Line(points={{225.0, 200.0}}));
connect( pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a)
    annotation (Line(points={{75.0, 200.0}}));
connect( pipe_Building_1Building_3_b.port_b, hex_W_SST_Building_3.port_b1)
    annotation (Line(points={{225.0, 200.0}}));

 //Building_2

connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3

connect( valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a)
    annotation (Line(points={{225.0, 125.0}}));
connect( pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b)
    annotation (Line(points={{275.0, 175.0}}));
connect( hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a)
    annotation (Line(points={{225.0, 125.0}}));
connect( pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b)
    annotation (Line(points={{275.0, 175.0}}));


end model_5;
model model_gas_boiler_20
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_20;
model model_gas_boiler_21
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_21;
model model_gas_boiler_22
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_22;
model model_gas_boiler_23
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_gas_boiler_23;
model model_gas_boiler_24
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_24;
model model_gas_boiler_25
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_25;
model model_gas_boiler_26
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_26;
model model_gas_boiler_27
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_27;
model model_gas_boiler_28
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_28;
model model_gas_boiler_29
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_gas_boiler_29;
model model_gas_boiler_210
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_210;
model model_gas_boiler_211
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_211;
model model_gas_boiler_212
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_212;
model model_gas_boiler_213
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_gas_boiler_213;
model model_gas_boiler_214
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_214;
model model_gas_boiler_215
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_215;
model model_heat_pump_20
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_20;
model model_heat_pump_21
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_21;
model model_heat_pump_22
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_22;
model model_heat_pump_23
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_heat_pump_23;
model model_heat_pump_24
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_24;
model model_heat_pump_25
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_25;
model model_heat_pump_26
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_26;
model model_heat_pump_27
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_27;
model model_heat_pump_28
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_28;
model model_heat_pump_29
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_heat_pump_29;
model model_heat_pump_210
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_210;
model model_heat_pump_211
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_211;
model model_heat_pump_212
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_212;
model model_heat_pump_213
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_heat_pump_213;
model model_heat_pump_214
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_214;
model model_heat_pump_215
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_215;
model model_heat_pump_gas_boiler_20
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_20;
model model_heat_pump_gas_boiler_21
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_21;
model model_heat_pump_gas_boiler_22
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_22;
model model_heat_pump_gas_boiler_23
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_heat_pump_gas_boiler_23;
model model_heat_pump_gas_boiler_24
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_24;
model model_heat_pump_gas_boiler_25
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_25;
model model_heat_pump_gas_boiler_26
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_26;
model model_heat_pump_gas_boiler_27
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_27;
model model_heat_pump_gas_boiler_28
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pump_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_28;
model model_heat_pump_gas_boiler_29
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pump_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_heat_pump_gas_boiler_29;
model model_heat_pump_gas_boiler_210
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_210;
model model_heat_pump_gas_boiler_211
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_211;
model model_heat_pump_gas_boiler_212
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pump_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_212;
model model_heat_pump_gas_boiler_213
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_heat_pump_gas_boiler_213;
model model_heat_pump_gas_boiler_214
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_214;
model model_heat_pump_gas_boiler_215
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_215;
model model_geo_heat_pump_20
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_20;
model model_geo_heat_pump_21
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_21;
model model_geo_heat_pump_22
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_22;
model model_geo_heat_pump_23
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_geo_heat_pump_23;
model model_geo_heat_pump_24
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_24;
model model_geo_heat_pump_25
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_25;
model model_geo_heat_pump_26
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_26;
model model_geo_heat_pump_27
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_27;
model model_geo_heat_pump_28
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_geo_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_geo_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_28;
model model_geo_heat_pump_29
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_geo_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_geo_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_geo_heat_pump_29;
model model_geo_heat_pump_210
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_210;
model model_geo_heat_pump_211
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_211;
model model_geo_heat_pump_212
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_geo_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_geo_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_212;
model model_geo_heat_pump_213
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_geo_heat_pump_213;
model model_geo_heat_pump_214
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_214;
model model_geo_heat_pump_215
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_215;
model model_gas_boiler_geo_20
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_20;
model model_gas_boiler_geo_21
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_21;
model model_gas_boiler_geo_22
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_22;
model model_gas_boiler_geo_23
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_gas_boiler_geo_23;
model model_gas_boiler_geo_24
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_24;
model model_gas_boiler_geo_25
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_25;
model model_gas_boiler_geo_26
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_26;
model model_gas_boiler_geo_27
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_27;
model model_gas_boiler_geo_28
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boiler_geoBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boiler_geoBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_28;
model model_gas_boiler_geo_29
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boiler_geoBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boiler_geoBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_gas_boiler_geo_29;
model model_gas_boiler_geo_210
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_210;
model model_gas_boiler_geo_211
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_1, Building_3
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_211;
model model_gas_boiler_geo_212
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boiler_geoBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boiler_geoBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_212;
model model_gas_boiler_geo_213
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_gas_boiler_geo_213;
model model_gas_boiler_geo_214
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // Building_2, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_214;
model model_gas_boiler_geo_215
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 
connect (valve_H_SST_Building_3.port_a, valve_W_SST_Building_3.port_a); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_215;
model model_gas_boiler_30
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_aL.port_a, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_30;
model model_gas_boiler_31
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_31;
model model_gas_boiler_32
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_32;
model model_gas_boiler_33
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_a, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_aL.port_a, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_gas_boiler_33;
model model_gas_boiler_34
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_34;
model model_gas_boiler_35
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_35;
model model_gas_boiler_36
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_aL.port_a, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_36;
model model_gas_boiler_37
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_37;
model model_gas_boiler_38
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_gas_boilerBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_38;
model model_gas_boiler_39
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_2_aL.port_a, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_gas_boilerBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_gas_boiler_39;
model model_gas_boiler_310
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_310;
model model_gas_boiler_311
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boilerBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_311;
model model_gas_boiler_312
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_gas_boilerBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_312;
model model_gas_boiler_313
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_a, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 
 end model_gas_boiler_313;
model model_gas_boiler_314
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler, Building_2
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_a, pipe_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boilerBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_314;
model model_gas_boiler_315
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler (
  y=boiler_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler (
  y=boilerL_supply_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler
 
connect(sink_supply_gas_boiler.ports[1], temp_return_supply_gas_boiler.port);
connect(prod_supply_gas_boiler.T_in, temp_return_supply_gas_boiler.T);
connect(prod_supply_gas_boiler.ports[1], boiler_supply_gas_boiler.port_a);
connect(input_supply_gas_boiler.y, PID_supply_gas_boiler.u_m);
connect(constant_supply_gas_boiler.y, PID_supply_gas_boiler.u_s);
connect(PID_supply_gas_boiler.y, boiler_supply_gas_boiler.y);
connect(prod_supply_gas_boiler.ports[2], boilerL_supply_gas_boiler.port_a);
connect(input_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_m);
connect(constant_Lsupply_gas_boiler.y, PID_Lsupply_gas_boiler.u_s);
connect(PID_Lsupply_gas_boiler.y, boilerL_supply_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler, Building_1
 
connect (boiler_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler.port, pipe_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler.port_b, pipe_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler, Building_3
 
connect (pipe_gas_boilerBuilding_1_a.port_a, pipe_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_1_b.port_a, pipe_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boilerBuilding_1_aL.port_a, pipe_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_315;
model model_heat_pump_30
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_aL.port_a, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_30;
model model_heat_pump_31
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_31;
model model_heat_pump_32
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_32;
model model_heat_pump_33
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_a, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_aL.port_a, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_heat_pump_33;
model model_heat_pump_34
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_34;
model model_heat_pump_35
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_35;
model model_heat_pump_36
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_aL.port_a, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_36;
model model_heat_pump_37
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_37;
model model_heat_pump_38
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_heat_pumpBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_38;
model model_heat_pump_39
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_2_aL.port_a, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_heat_pumpBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_heat_pump_39;
model model_heat_pump_310
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_310;
model model_heat_pump_311
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pumpBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_311;
model model_heat_pump_312
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_heat_pumpBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_312;
model model_heat_pump_313
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_a, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 
 end model_heat_pump_313;
model model_heat_pump_314
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump, Building_2
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_a, pipe_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pumpBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_314;
model model_heat_pump_315
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump
 
connect(sink_supply_heat_pump.ports[1], temp_return_supply_heat_pump.port);
connect(prod_supply_heat_pump.T_in, temp_return_supply_heat_pump.T);
connect(prod_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a1);
connect(source_sea_supply_heat_pump.ports[1], HP_supply_heat_pump.port_a2);
connect(HP_supply_heat_pump.port_b2, sink_sea_supply_heat_pump.ports[1]);
connect(constant_supply_heat_pump.y, HP_supply_heat_pump.TSet);
connect(prod_supply_heat_pump.ports[2], HPL_supply_heat_pump.port_a1);
connect(source_seaL_supply_heat_pump.ports[1], HPL_supply_heat_pump.port_a2);
connect(HPL_supply_heat_pump.port_b2, sink_seaL_supply_heat_pump.ports[1]);
connect(constantL_supply_heat_pump.y, HPL_supply_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump, Building_1
 
connect (HP_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump.port, pipe_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_heat_pump.port_b1, pipe_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump, Building_3
 
connect (pipe_heat_pumpBuilding_1_a.port_a, pipe_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_1_b.port_a, pipe_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pumpBuilding_1_aL.port_a, pipe_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_315;
model model_heat_pump_gas_boiler_30
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_aL.port_a, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_30;
model model_heat_pump_gas_boiler_31
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_31;
model model_heat_pump_gas_boiler_32
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_32;
model model_heat_pump_gas_boiler_33
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_a, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_aL.port_a, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_heat_pump_gas_boiler_33;
model model_heat_pump_gas_boiler_34
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_34;
model model_heat_pump_gas_boiler_35
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_35;
model model_heat_pump_gas_boiler_36
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_aL.port_a, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_36;
model model_heat_pump_gas_boiler_37
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_37;
model model_heat_pump_gas_boiler_38
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pump_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_38;
model model_heat_pump_gas_boiler_39
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_aL.port_a, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pump_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_heat_pump_gas_boiler_39;
model model_heat_pump_gas_boiler_310
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_heat_pump_gas_boiler_310;
model model_heat_pump_gas_boiler_311
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_311;
model model_heat_pump_gas_boiler_312
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_heat_pump_gas_boilerBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_heat_pump_gas_boilerBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_heat_pump_gas_boilerBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_312;
model model_heat_pump_gas_boiler_313
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_a, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_313;
model model_heat_pump_gas_boiler_314
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // heat_pump_gas_boiler, Building_2
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_a, pipe_heat_pump_gas_boilerBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_314;
model model_heat_pump_gas_boiler_315
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant const_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_heat_pump_gas_boiler (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constL_supply_heat_pump_gas_boiler (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_heat_pump_gas_boiler (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_heat_pump_gas_boiler (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_heat_pump_gas_boiler (
  y=boiler_supply_heat_pump_gas_boiler.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_heat_pump_gas_boiler (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_heat_pump_gas_boilerBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //heat_pump_gas_boiler
 
connect(sink_supply_heat_pump_gas_boiler.ports[1], temp_return_supply_heat_pump_gas_boiler.port);
connect(prod_supply_heat_pump_gas_boiler.T_in, temp_return_supply_heat_pump_gas_boiler.T);
connect(prod_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a1);
connect(source_sea_supply_heat_pump_gas_boiler.ports[1], HP_supply_heat_pump_gas_boiler.port_a2);
connect(HP_supply_heat_pump_gas_boiler.port_b2, sink_sea_supply_heat_pump_gas_boiler.ports[1]);
connect(const_supply_heat_pump_gas_boiler.y, HP_supply_heat_pump_gas_boiler.TSet);
connect(HP_supply_heat_pump_gas_boiler.port_b1, boiler_supply_heat_pump_gas_boiler.port_a);
connect(input_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_m);
connect(constant_supply_heat_pump_gas_boiler.y, PID_supply_heat_pump_gas_boiler.u_s);
connect(PID_supply_heat_pump_gas_boiler.y, boiler_supply_heat_pump_gas_boiler.y);
connect(prod_supply_heat_pump_gas_boiler.ports[2], HPL_supply_heat_pump_gas_boiler.port_a1);
connect(source_seaL_supply_heat_pump_gas_boiler.ports[1], HPL_supply_heat_pump_gas_boiler.port_a2);
connect(HPL_supply_heat_pump_gas_boiler.port_b2, sink_seaL_supply_heat_pump_gas_boiler.ports[1]);
connect(constL_supply_heat_pump_gas_boiler.y, HPL_supply_heat_pump_gas_boiler.TSet);
connect(HPL_supply_heat_pump_gas_boiler.port_b1, boilerL_supply_heat_pump_gas_boiler.port_a);
connect(input_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_m);
connect(constant_Lsupply_heat_pump_gas_boiler.y, PID_Lsupply_heat_pump_gas_boiler.u_s);
connect(PID_Lsupply_heat_pump_gas_boiler.y, boilerL_supply_heat_pump_gas_boiler.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // heat_pump_gas_boiler, Building_1
 
connect (boiler_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_heat_pump_gas_boiler.port, pipe_heat_pump_gas_boilerBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_heat_pump_gas_boiler.port_b, pipe_heat_pump_gas_boilerBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // heat_pump_gas_boiler, Building_3
 
connect (pipe_heat_pump_gas_boilerBuilding_1_a.port_a, pipe_heat_pump_gas_boilerBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_b.port_a, pipe_heat_pump_gas_boilerBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_1_aL.port_a, pipe_heat_pump_gas_boilerBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_heat_pump_gas_boilerBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_heat_pump_gas_boilerBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_heat_pump_gas_boilerBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_heat_pump_gas_boilerBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_heat_pump_gas_boiler_315;
model model_geo_heat_pump_30
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_aL.port_a, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_30;
model model_geo_heat_pump_31
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_31;
model model_geo_heat_pump_32
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_geo_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_32;
model model_geo_heat_pump_33
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_a, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_aL.port_a, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_geo_heat_pump_33;
model model_geo_heat_pump_34
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_34;
model model_geo_heat_pump_35
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_geo_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_35;
model model_geo_heat_pump_36
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_aL.port_a, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_geo_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_36;
model model_geo_heat_pump_37
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_geo_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_37;
model model_geo_heat_pump_38
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_geo_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_geo_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_geo_heat_pumpBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_38;
model model_geo_heat_pump_39
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_aL.port_a, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_geo_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_geo_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_geo_heat_pumpBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_geo_heat_pump_39;
model model_geo_heat_pump_310
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_geo_heat_pump_310;
model model_geo_heat_pump_311
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_311;
model model_geo_heat_pump_312
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_geo_heat_pumpBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_geo_heat_pumpBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_geo_heat_pumpBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_312;
model model_geo_heat_pump_313
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_a, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 
 end model_geo_heat_pump_313;
model model_geo_heat_pump_314
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // geo_heat_pump, Building_2
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_a, pipe_geo_heat_pumpBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_geo_heat_pumpBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_geo_heat_pumpBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_314;
model model_geo_heat_pump_315
 
 

 // Supply_heating 
 
Buildings.Fluid.HeatPumps.Carnot_TCon HP_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_sea_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constant_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatPumps.Carnot_TCon HPL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water,
redeclare package Medium2 = Buildings.Media.Water,
show_T=true,
QCon_flow_nominal=1e6,
use_eta_Carnot_nominal=false,
COP_nominal=4,
dp1_nominal=0,
dp2_nominal=0
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_seaL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Sources.Constant constantL_supply_geo_heat_pump (
  ) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_geo_heat_pump (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_geo_heat_pump (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_geo_heat_pumpBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //geo_heat_pump
 
connect(sink_supply_geo_heat_pump.ports[1], temp_return_supply_geo_heat_pump.port);
connect(prod_supply_geo_heat_pump.T_in, temp_return_supply_geo_heat_pump.T);
connect(prod_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a1);
connect(source_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_a2);
connect(sink_geo_supply_geo_heat_pump.ports[1], hex_supply_geo_heat_pump.port_b2);
connect(hex_supply_geo_heat_pump.port_b1, HP_supply_geo_heat_pump.port_a1);
connect(source_sea_supply_geo_heat_pump.ports[1], HP_supply_geo_heat_pump.port_a2);
connect(HP_supply_geo_heat_pump.port_b2, sink_sea_supply_geo_heat_pump.ports[1]);
connect(constant_supply_geo_heat_pump.y, HP_supply_geo_heat_pump.TSet);
connect(prod_supply_geo_heat_pump.ports[2], hexL_supply_geo_heat_pump.port_a1);
connect(source_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_a2);
connect(sink_geoL_supply_geo_heat_pump.ports[1], hexL_supply_geo_heat_pump.port_b2);
connect(hexL_supply_geo_heat_pump.port_b1, HPL_supply_geo_heat_pump.port_a1);
connect(source_seaL_supply_geo_heat_pump.ports[1], HPL_supply_geo_heat_pump.port_a2);
connect(HPL_supply_geo_heat_pump.port_b2, sink_seaL_supply_geo_heat_pump.ports[1]);
connect(constantL_supply_geo_heat_pump.y, HPL_supply_geo_heat_pump.TSet);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // geo_heat_pump, Building_1
 
connect (HP_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_geo_heat_pump.port, pipe_geo_heat_pumpBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (HPL_supply_geo_heat_pump.port_b1, pipe_geo_heat_pumpBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // geo_heat_pump, Building_3
 
connect (pipe_geo_heat_pumpBuilding_1_a.port_a, pipe_geo_heat_pumpBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_b.port_a, pipe_geo_heat_pumpBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_geo_heat_pumpBuilding_1_aL.port_a, pipe_geo_heat_pumpBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_geo_heat_pumpBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_geo_heat_pumpBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_geo_heat_pumpBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_geo_heat_pumpBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_geo_heat_pump_315;
model model_gas_boiler_geo_30
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_aL.port_a, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_30;
model model_gas_boiler_geo_31
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_31;
model model_gas_boiler_geo_32
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_32;
model model_gas_boiler_geo_33
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_a, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_aL.port_a, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 
 end model_gas_boiler_geo_33;
model model_gas_boiler_geo_34
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_34;
model model_gas_boiler_geo_35
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_35;
model model_gas_boiler_geo_36
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_aL.port_a, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_36;
model model_gas_boiler_geo_37
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_b) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_37;
model model_gas_boiler_geo_38
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boiler_geoBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boiler_geoBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_38;
model model_gas_boiler_geo_39
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_aL.port_a, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boiler_geoBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boiler_geoBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 
 end model_gas_boiler_geo_39;
model model_gas_boiler_geo_310
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_2_a.port_a, pipe_Building_1Building_3_a.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_b.port_a, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (pipe_Building_1Building_2_aL.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 
 end model_gas_boiler_geo_310;
model model_gas_boiler_geo_311
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=300
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,200.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_1, Building_3
 
connect (pipe_Building_1Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_3_b.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 200.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_3_aL.port_a) 
    annotation (Line(points={{75.0, 200.0}})) ;
connect (pipe_Building_1Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 200.0}})) ;

 // Building_2, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_Building_1Building_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_Building_1Building_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_Building_1Building_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_311;
model model_gas_boiler_geo_312
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // Building_1, Building_2
 
connect (pipe_Building_1Building_2_a.port_b, pipe_gas_boiler_geoBuilding_2_a.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (hex_SST_Building_1.port_b1, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_gas_boiler_geoBuilding_2_b.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (valve_SST_Building_1.port_a, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_gas_boiler_geoBuilding_2_aL.port_b) 
    annotation (Line(points={{150.0, 125.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_Building_1Building_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_1Building_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_312;
model model_gas_boiler_geo_313
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,190})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,190})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,210})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_1Building_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_a, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,200}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_1, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_b, pipe_Building_1Building_2_a.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, pipe_Building_1Building_2_b.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;
connect (pipe_Building_1Building_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 125.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, pipe_Building_1Building_2_aL.port_a) 
    annotation (Line(points={{50.0, 175.0}})) ;

 
 end model_gas_boiler_geo_313;
model model_gas_boiler_geo_314
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_2_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=223
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={100.0,50.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // gas_boiler_geo, Building_2
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_2_a.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, valve_SST_Building_2.port_a) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_2_b.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, hex_SST_Building_2.port_b1) 
    annotation (Line(points={{150.0, 75.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_a, pipe_gas_boiler_geoBuilding_2_aL.port_a) 
    annotation (Line(points={{50.0, 25.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // Building_2, Building_3
 
connect (pipe_gas_boiler_geoBuilding_2_a.port_b, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_b.port_b, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_gas_boiler_geoBuilding_2_aL.port_b, pipe_Building_2Building_3_aL.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_314;
model model_gas_boiler_geo_315
 
 

 // Supply_heating 
 
Buildings.Fluid.Boilers.BoilerPolynomial boiler_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT prod_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=2
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sensors.Temperature temp_return_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_supply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_supply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_supply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geo_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Boilers.BoilerPolynomial boilerL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=10, 
dp_nominal=0, 
Q_flow_nominal=1e6, 
effCur=Buildings.Fluid.Types.EfficiencyCurves.Constant, 
fue=Buildings.Fluid.Data.Fuels.NaturalGasHigherHeatingValue() 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Modelica.Blocks.Continuous.LimPID PID_Lsupply_gas_boiler_geo (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_Lsupply_gas_boiler_geo (
  y=boiler_supply_gas_boiler_geo.sta_b.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_Lsupply_gas_boiler_geo (
  k=273.15+0, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hexL_supply_gas_boiler_geo (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.Boundary_pT sink_geoL_supply_gas_boiler_geo (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Buildings 
 
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_1 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_1 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_1 (
  y=hex_SST_Building_1.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_1 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_1 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_H_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_H_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_H_SST_Building_3 (
  y=hex_H_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_H_SST_Building_3 (
  k=273.15+45, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_H_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={10,-10})));
Buildings.Fluid.Sources.Boundary_pT sink_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-10,-10})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_W_SST_Building_3 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0,10})));
Modelica.Blocks.Continuous.LimPID PID_W_SST_Building_3 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_W_SST_Building_3 (
  y=hex_W_SST_Building_3.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_W_SST_Building_3 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_W_SST_Building_3 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));
Buildings.Fluid.Sources.MassFlowSource_T source_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40
m_flow = 1,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={210,90})));
Buildings.Fluid.Sources.Boundary_pT sink_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
T = 273.15+40,
p = 2e5,
nPorts=1
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={190,90})));
Buildings.Fluid.HeatExchangers.PlateHeatExchangerEffectivenessNTU hex_SST_Building_2 (
  redeclare package Medium1 = Buildings.Media.Water, 
redeclare package Medium2 = Buildings.Media.Water, 
configuration=Buildings.Fluid.Types.HeatExchangerConfiguration.CounterFlow,
m1_flow_nominal=1,
m2_flow_nominal=1,
dp1_nominal=1,
dp2_nominal=1,
use_Q_flow_nominal=false,
eps_nominal=0.9,
show_T=true,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={200,110})));
Modelica.Blocks.Continuous.LimPID PID_SST_Building_2 (
  k=0.0001,
yMax=1,
yMin=0.001
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-30,10})));
Modelica.Blocks.Sources.RealExpression input_SST_Building_2 (
  y=hex_SST_Building_2.sta_b2.T) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-40,0})));
Modelica.Blocks.Sources.Constant constant_SST_Building_2 (
  k=273.15+60, 
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={-50,10})));
Buildings.Fluid.Actuators.Valves.TwoWayLinear valve_SST_Building_2 (
  redeclare package Medium = Buildings.Media.Water, 
CvData=Buildings.Fluid.Types.CvTypes.Kv,
m_flow_nominal=1,
Kv=10,
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,0.0})));

 // Pipes 
 
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_1_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=200
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={0.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_gas_boiler_geoBuilding_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=360
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={150.0,100.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_a (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_b (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));
Buildings.Fluid.FixedResistances.Pipe pipe_Building_2Building_3_aL (
  redeclare package Medium = Buildings.Media.Water, 
m_flow_nominal=1,
thicknessIns=0.05,
lambdaIns=0.03,
diameter=0.1,
length=141
) 
annotation (Placement(transformation(extent={{-10,-10},{10,10}}, origin={250.0,150.0})));

 equation 
 

 //gas_boiler_geo
 
connect(sink_supply_gas_boiler_geo.ports[1], temp_return_supply_gas_boiler_geo.port);
connect(prod_supply_gas_boiler_geo.T_in, temp_return_supply_gas_boiler_geo.T);
connect(prod_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a1);
connect(hex_supply_gas_boiler_geo.port_b1, boiler_supply_gas_boiler_geo.port_a);
connect(source_geo_supply_gas_boiler_geo.ports[1], hex_supply_gas_boiler_geo.port_a2);
connect(hex_supply_gas_boiler_geo.port_b2, sink_geo_supply_gas_boiler_geo.ports[1]);
connect(input_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_m);
connect(constant_supply_gas_boiler_geo.y, PID_supply_gas_boiler_geo.u_s);
connect(PID_supply_gas_boiler_geo.y, boiler_supply_gas_boiler_geo.y);
connect(source_geoL_supply_gas_boiler_geo.ports[1], hexL_supply_gas_boiler_geo.port_a2);
connect(hexL_supply_gas_boiler_geo.port_b2, sink_geoL_supply_gas_boiler_geo.ports[1]);
connect(prod_supply_gas_boiler_geo.ports[2], hexL_supply_gas_boiler_geo.port_a1);
connect(input_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_m);
connect(constant_Lsupply_gas_boiler_geo.y, PID_Lsupply_gas_boiler_geo.u_s);
connect(PID_Lsupply_gas_boiler_geo.y, boilerL_supply_gas_boiler_geo.y);

 //Building_1
 
connect(source_SST_Building_1.ports[1], hex_SST_Building_1.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_SST_Building_1.port_b2, sink_SST_Building_1.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_SST_Building_1.y, PID_SST_Building_1.u_m);
connect(constant_SST_Building_1.y, PID_SST_Building_1.u_s);
connect(PID_SST_Building_1.y, valve_SST_Building_1.y);
connect(valve_SST_Building_1.port_b, hex_SST_Building_1.port_a1);

 // gas_boiler_geo, Building_1
 
connect (boiler_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_a.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (temp_return_supply_gas_boiler_geo.port, pipe_gas_boiler_geoBuilding_1_b.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_b, hex_SST_Building_1.port_b1) 
    annotation (Line(points={{0.0, 150.0}})) ;
connect (boilerL_supply_gas_boiler_geo.port_b, pipe_gas_boiler_geoBuilding_1_aL.port_a) 
    annotation (Line(points={{0.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_b, valve_SST_Building_1.port_a) 
    annotation (Line(points={{0.0, 150.0}})) ;

 //Building_3
 
connect(source_H_SST_Building_3.ports[1], hex_H_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_H_SST_Building_3.port_b2, sink_H_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_H_SST_Building_3.y, PID_H_SST_Building_3.u_m);
connect(constant_H_SST_Building_3.y, PID_H_SST_Building_3.u_s);
connect(PID_H_SST_Building_3.y, valve_H_SST_Building_3.y);
connect(valve_H_SST_Building_3.port_b, hex_H_SST_Building_3.port_a1);
connect(source_W_SST_Building_3.ports[1], hex_W_SST_Building_3.port_a2)
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(hex_W_SST_Building_3.port_b2, sink_W_SST_Building_3.ports[1])
    annotation (Line(points={{0,0}},color={0,127,255}));
connect(input_W_SST_Building_3.y, PID_W_SST_Building_3.u_m);
connect(constant_W_SST_Building_3.y, PID_W_SST_Building_3.u_s);
connect(PID_W_SST_Building_3.y, valve_W_SST_Building_3.y);
connect(valve_W_SST_Building_3.port_b, hex_W_SST_Building_3.port_a1);
connect (hex_H_SST_Building_3.port_b1, hex_W_SST_Building_3.port_b1); 

 // gas_boiler_geo, Building_3
 
connect (pipe_gas_boiler_geoBuilding_1_a.port_a, pipe_gas_boiler_geoBuilding_3_a.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_a.port_b, valve_W_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_b.port_a, pipe_gas_boiler_geoBuilding_3_b.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_b.port_b, hex_H_SST_Building_3.port_b1) 
    annotation (Line(points={{225.0, 150.0}})) ;
connect (pipe_gas_boiler_geoBuilding_1_aL.port_a, pipe_gas_boiler_geoBuilding_3_aL.port_a) 
    annotation (Line(points={{75.0, 50.0}})) ;
connect (pipe_gas_boiler_geoBuilding_3_aL.port_b, valve_H_SST_Building_3.port_a) 
    annotation (Line(points={{225.0, 150.0}})) ;

 //Building_2
 
connect(source_SST_Building_2.ports[1], hex_SST_Building_2.port_a2)
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(hex_SST_Building_2.port_b2, sink_SST_Building_2.ports[1])
    annotation (Line(points={{200,100}},color={0,127,255}));
connect(input_SST_Building_2.y, PID_SST_Building_2.u_m);
connect(constant_SST_Building_2.y, PID_SST_Building_2.u_s);
connect(PID_SST_Building_2.y, valve_SST_Building_2.y);
connect(valve_SST_Building_2.port_b, hex_SST_Building_2.port_a1);

 // Building_2, Building_3
 
connect (valve_SST_Building_2.port_a, pipe_Building_2Building_3_a.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_a.port_b, pipe_gas_boiler_geoBuilding_3_a.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (hex_SST_Building_2.port_b1, pipe_Building_2Building_3_b.port_a) 
    annotation (Line(points={{225.0, 125.0}})) ;
connect (pipe_Building_2Building_3_b.port_b, pipe_gas_boiler_geoBuilding_3_b.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;
connect (pipe_Building_2Building_3_aL.port_b, pipe_gas_boiler_geoBuilding_3_aL.port_b) 
    annotation (Line(points={{275.0, 175.0}})) ;

 
 end model_gas_boiler_geo_315;
end Method;